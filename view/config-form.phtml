<fieldset id="fieldset-universalviewer-general">
    <legend><?php echo $t->translate('General parameters'); ?></legend>
    <p class="explanation">
        <?php echo $t->translate('If checked, the viewer will be automatically appended to the collections or items show page.'); ?>
        <?php echo $t->translate('Else, the viewer can be added via the helper in the theme or the shortcode in any page.'); ?>
    </p>
    <div class="field">
        <?php
            $checkbox = new Zend\Form\Element\Checkbox('universalviewer_append_collections_show');
            $checkbox->setLabel($t->translate('Append to "Item set show"'));
            $checkbox->setAttribute('id', 'universalviewer_append_collections_show');
            $checkbox->setValue($settings->get('universalviewer_append_collections_show'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($checkbox); ?>
        </div>
        <div class="inputs">
            <?php echo $this->formCheckbox($checkbox); ?>
        </div>
    </div>
    <div class="field">
        <?php
            $checkbox = new Zend\Form\Element\Checkbox('universalviewer_append_items_show');
            $checkbox->setLabel($t->translate('Append to "Item show"'));
            $checkbox->setAttribute('id', 'universalviewer_append_items_show');
            $checkbox->setValue($settings->get('universalviewer_append_items_show'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($checkbox); ?>
        </div>
        <div class="inputs">
            <?php echo $this->formCheckbox($checkbox); ?>
        </div>
    </div>
    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_max_dynamic_size');
            $text->setLabel($t->translate('Max dynamic size for images'));
            $text->setAttribute('id', 'universalviewer_max_dynamic_size');
            $text->setValue($settings->get('universalviewer_max_dynamic_size'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('Set the maximum size in bytes for the dynamic processing of images.'); ?>
                    <?php echo $t->translate('Beyond this limit, the plugin will require a tiled image, for example made by OpenLayersZoom.'); ?>
                    <?php echo $t->translate('Let empty to allow processing of any image.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>
</fieldset>
<fieldset id="fieldset-universalviewer-info">
    <legend><?php echo $t->translate('Common infos'); ?></legend>
    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_licence');
            $text->setLabel($t->translate('Licence'));
            $text->setAttribute('id', 'universalviewer_licence');
            $text->setValue($settings->get('universalviewer_licence'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('If any, this link will be added in all manifests and viewers to indicate the rights.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>
    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_attribution');
            $text->setLabel($t->translate('Attribution'));
            $text->setAttribute('id', 'universalviewer_attribution');
            $text->setValue($settings->get('universalviewer_attribution'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('If any, this text will be added in all manifests and viewers.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>
    <div class="field">
        <?php
        // Use the true property, not its internal id (see PropertySelect).
        $valueOptions = [];
        $response = $this->api()->search('vocabularies');
        foreach ($response->getContent() as $vocabulary) {
            $options = [];
            foreach ($vocabulary->properties() as $property) {
                $options[] = [
                    'label' => $property->label(),
                    'value' => $property->term(),
                ];
            }
            if (!$options) {
                continue;
            }
            $valueOptions[] = [
                'label' => $vocabulary->label(),
                'options' => $options,
            ];
        }

        $select = new Zend\Form\Element\Select('universalviewer_alternative_manifest_property');
        $select
            ->setLabel($t->translate('Alternative Manifest Property'))
            ->setAttribute('id', 'universalviewer_alternative_manifest_property')
            ->setValue($settings->get('universalviewer_alternative_manifest_property'))
            ->setEmptyOption($t->translate('Select a property...'))
            ->setValueOptions($valueOptions);
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($select); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('The property supplying the alternative manifest URL for the viewer, for example "Dublin Core:Has Format".'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formSelect($select); ?>
        </div>
    </div>
</fieldset>
<fieldset id="fieldset-universalviewer-embed">
    <legend><?php echo $t->translate('Integration of the viewer'); ?></legend>
    <p>
        <?php echo $t->translate('These values allows to parameter the integration of the viewer in Omeka pages.'); ?>
        <?php echo $t->translate('The viewer itself can be configured via the file "config.json" and the helper.'); ?>
    </p>

    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_class');
            $text->setLabel($t->translate('Class of inline frame'));
            $text->setAttribute('id', 'universalviewer_class');
            $text->setValue($settings->get('universalviewer_class'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('Class to add to the inline frame.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>

    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_width');
            $text->setLabel($t->translate('Width of inline frame'));
            $text->setAttribute('id', 'universalviewer_width');
            $text->setValue($settings->get('universalviewer_width'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('Keep this field blank to avoid an issue with some themes.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>

    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_height');
            $text->setLabel($t->translate('Height of inline frame'));
            $text->setAttribute('id', 'universalviewer_height');
            $text->setValue($settings->get('universalviewer_height'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>

    <div class="field">
        <?php
            $text = new Zend\Form\Element\Text('universalviewer_locale');
            $text->setLabel($t->translate('Locales of the viewer'));
            $text->setAttribute('id', 'universalviewer_locale');
            $text->setValue($settings->get('universalviewer_locale'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($text); ?>
        </div>
        <div class="inputs">
            <?php echo $this->formText($text); ?>
        </div>
    </div>
</fieldset>

<fieldset id="fieldset-universalviewer-background">
    <legend><?php echo $t->translate('Background parameters'); ?></legend>

    <div class="field">
        <?php
            $select = new Zend\Form\Element\Select('universalviewer_iiif_creator');
            $select->setLabel($t->translate('Image processor'));
            $select->setAttribute('id', 'universalviewer_iiif_creator');
            $processors['Auto'] = $t->translate('Automatic (GD when possible, else ImageMagick)');
            $select->setValueOptions($processors);
            $select->setValue($settings->get('universalviewer_iiif_creator'));
        ?>
        <div class="field-meta">
            <?php echo $this->formLabel($select); ?>
            <a class="expand" href="#"></a>
            <div class="collapsible">
                <div class="field-description">
                    <?php echo $t->translate('Images may be processed internally before to be sent to browser.'); ?>
                    <?php echo $t->translate('Select the one to use.'); ?>
                    <?php echo $t->translate('Generally, GD is quicker than ImageMagick, but ImageMagick manages more formats.'); ?>
                    <?php echo $t->translate('Nevertheless, the performance depends on your installation and your server.'); ?>
                </div>
            </div>
        </div>
        <div class="inputs">
            <?php echo $this->formSelect($select); ?>
        </div>
    </div>
</fieldset>
